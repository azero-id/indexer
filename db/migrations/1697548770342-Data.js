module.exports = class Data1697548770342 {
    name = 'Data1697548770342'

    async up(db) {
        await db.query(`CREATE TABLE "public_phase_activated" ("id" character varying NOT NULL, "activated_at" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_cb0a5f1411df5b95a7db3f3dd29" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d3b1099725bf9ae9412e6cab75" ON "public_phase_activated" ("activated_at") `)
        await db.query(`CREATE TABLE "owner" ("id" character varying NOT NULL, CONSTRAINT "PK_8e86b6b9f94aece7d12d465dc0c" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "domain" ("id" character varying NOT NULL, "tld" text NOT NULL, "name" text NOT NULL, "registered_at" TIMESTAMP WITH TIME ZONE NOT NULL, "owner_id" character varying, CONSTRAINT "PK_27e3ec3ea0ae02c8c5bceab3ba9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_26a07113f90df161f919c7d5a6" ON "domain" ("name") `)
        await db.query(`CREATE INDEX "IDX_4e21006496ef49995f4cf5ff8c" ON "domain" ("owner_id") `)
        await db.query(`CREATE INDEX "IDX_0ff1c40a256020d3f014e1bde4" ON "domain" ("registered_at") `)
        await db.query(`CREATE UNIQUE INDEX "IDX_761b9389f224473cf39461ea77" ON "domain" ("tld", "name") `)
        await db.query(`CREATE TABLE "reservation" ("id" character varying NOT NULL, "tld" text NOT NULL, "name" text NOT NULL, "address" text, "reserved_at" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_48b1f9922368359ab88e8bfa525" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_795bd3539bf0e28a6ee8f3e5e6" ON "reservation" ("name") `)
        await db.query(`CREATE INDEX "IDX_be855acbdb7b9948e3d60410cb" ON "reservation" ("address") `)
        await db.query(`CREATE INDEX "IDX_485e25a3b41f54bdc12225dc5a" ON "reservation" ("reserved_at") `)
        await db.query(`CREATE UNIQUE INDEX "IDX_8db2acd5da3fa5541d1b66f7b9" ON "reservation" ("tld", "name") `)
        await db.query(`CREATE TABLE "referral" ("id" character varying NOT NULL, "tld" text NOT NULL, "name" text NOT NULL, "address" text NOT NULL, "referrer_name" text NOT NULL, "referrer_address" text NOT NULL, "referral_amount" numeric NOT NULL, "received_fee_amount" numeric NOT NULL, "referred_at" TIMESTAMP WITH TIME ZONE NOT NULL, CONSTRAINT "PK_a2d3e935a6591168066defec5ad" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d7850a2f416781906b36e09707" ON "referral" ("name") `)
        await db.query(`CREATE INDEX "IDX_419831e9441e429f6a4ec5acd6" ON "referral" ("address") `)
        await db.query(`CREATE INDEX "IDX_955a8260e26ebfa023df846b6f" ON "referral" ("referrer_name") `)
        await db.query(`CREATE INDEX "IDX_4d07a0e7437e1394a8e97ee6c1" ON "referral" ("referrer_address") `)
        await db.query(`CREATE INDEX "IDX_fa92a6bd68db3e06d48d7dac81" ON "referral" ("referred_at") `)
        await db.query(`CREATE UNIQUE INDEX "IDX_9caa9f6131b005224eea997fb8" ON "referral" ("tld", "name", "referred_at") `)
        await db.query(`CREATE TABLE "giveaway_coupon" ("id" character varying NOT NULL, "tld" text NOT NULL, "name" text NOT NULL, "public_code" text NOT NULL, "reserved_at" TIMESTAMP WITH TIME ZONE NOT NULL, "claimed_by" text, "claimed_at" TIMESTAMP WITH TIME ZONE, "claim_duration_in_seconds" integer, CONSTRAINT "PK_b73a95298c683899f41372a93a5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_769df2f364aa35470541db4447" ON "giveaway_coupon" ("name") `)
        await db.query(`CREATE INDEX "IDX_bf40d0613fed445d19480e2e08" ON "giveaway_coupon" ("public_code") `)
        await db.query(`CREATE INDEX "IDX_bc679bfddaaf74ad4aad8029a7" ON "giveaway_coupon" ("reserved_at") `)
        await db.query(`CREATE INDEX "IDX_c2b2f322f633e5e78c4ee72439" ON "giveaway_coupon" ("claimed_by") `)
        await db.query(`CREATE INDEX "IDX_3234c604708ca4edec6799c11e" ON "giveaway_coupon" ("claimed_at") `)
        await db.query(`CREATE UNIQUE INDEX "IDX_4aa83e4bfc7b93760762854ef9" ON "giveaway_coupon" ("tld", "name", "reserved_at") `)
        await db.query(`CREATE TABLE "received_fee" ("id" character varying NOT NULL, "block_hash" text NOT NULL, "extrinsic_id" text NOT NULL, "tld" text NOT NULL, "name" text NOT NULL, "from" text NOT NULL, "event_type" text NOT NULL, "received_at" TIMESTAMP WITH TIME ZONE NOT NULL, "received_amount" numeric NOT NULL, "received_amount_eur" numeric NOT NULL, "registration_duration_in_years" integer NOT NULL, CONSTRAINT "PK_75fa7cead141f6ccb9be0cd9a5f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7a0952f14bc3b64c069fa73e23" ON "received_fee" ("block_hash") `)
        await db.query(`CREATE INDEX "IDX_e49c761d8c3c6d29b99f55c7c1" ON "received_fee" ("extrinsic_id") `)
        await db.query(`CREATE INDEX "IDX_8a8a3c1184b11591a1c13fc046" ON "received_fee" ("name") `)
        await db.query(`CREATE INDEX "IDX_5d9f3fc91497a08b12d4a91897" ON "received_fee" ("from") `)
        await db.query(`CREATE INDEX "IDX_18f50c09f4a984cf8d26bb06f2" ON "received_fee" ("event_type") `)
        await db.query(`CREATE INDEX "IDX_b316087ca3b544e1cca89d60c9" ON "received_fee" ("received_at") `)
        await db.query(`CREATE UNIQUE INDEX "IDX_4a1de51a90e2fef44b0cfbe3f7" ON "received_fee" ("tld", "name", "event_type", "received_at") `)
        await db.query(`ALTER TABLE "domain" ADD CONSTRAINT "FK_4e21006496ef49995f4cf5ff8c4" FOREIGN KEY ("owner_id") REFERENCES "owner"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "public_phase_activated"`)
        await db.query(`DROP INDEX "public"."IDX_d3b1099725bf9ae9412e6cab75"`)
        await db.query(`DROP TABLE "owner"`)
        await db.query(`DROP TABLE "domain"`)
        await db.query(`DROP INDEX "public"."IDX_26a07113f90df161f919c7d5a6"`)
        await db.query(`DROP INDEX "public"."IDX_4e21006496ef49995f4cf5ff8c"`)
        await db.query(`DROP INDEX "public"."IDX_0ff1c40a256020d3f014e1bde4"`)
        await db.query(`DROP INDEX "public"."IDX_761b9389f224473cf39461ea77"`)
        await db.query(`DROP TABLE "reservation"`)
        await db.query(`DROP INDEX "public"."IDX_795bd3539bf0e28a6ee8f3e5e6"`)
        await db.query(`DROP INDEX "public"."IDX_be855acbdb7b9948e3d60410cb"`)
        await db.query(`DROP INDEX "public"."IDX_485e25a3b41f54bdc12225dc5a"`)
        await db.query(`DROP INDEX "public"."IDX_8db2acd5da3fa5541d1b66f7b9"`)
        await db.query(`DROP TABLE "referral"`)
        await db.query(`DROP INDEX "public"."IDX_d7850a2f416781906b36e09707"`)
        await db.query(`DROP INDEX "public"."IDX_419831e9441e429f6a4ec5acd6"`)
        await db.query(`DROP INDEX "public"."IDX_955a8260e26ebfa023df846b6f"`)
        await db.query(`DROP INDEX "public"."IDX_4d07a0e7437e1394a8e97ee6c1"`)
        await db.query(`DROP INDEX "public"."IDX_fa92a6bd68db3e06d48d7dac81"`)
        await db.query(`DROP INDEX "public"."IDX_9caa9f6131b005224eea997fb8"`)
        await db.query(`DROP TABLE "giveaway_coupon"`)
        await db.query(`DROP INDEX "public"."IDX_769df2f364aa35470541db4447"`)
        await db.query(`DROP INDEX "public"."IDX_bf40d0613fed445d19480e2e08"`)
        await db.query(`DROP INDEX "public"."IDX_bc679bfddaaf74ad4aad8029a7"`)
        await db.query(`DROP INDEX "public"."IDX_c2b2f322f633e5e78c4ee72439"`)
        await db.query(`DROP INDEX "public"."IDX_3234c604708ca4edec6799c11e"`)
        await db.query(`DROP INDEX "public"."IDX_4aa83e4bfc7b93760762854ef9"`)
        await db.query(`DROP TABLE "received_fee"`)
        await db.query(`DROP INDEX "public"."IDX_7a0952f14bc3b64c069fa73e23"`)
        await db.query(`DROP INDEX "public"."IDX_e49c761d8c3c6d29b99f55c7c1"`)
        await db.query(`DROP INDEX "public"."IDX_8a8a3c1184b11591a1c13fc046"`)
        await db.query(`DROP INDEX "public"."IDX_5d9f3fc91497a08b12d4a91897"`)
        await db.query(`DROP INDEX "public"."IDX_18f50c09f4a984cf8d26bb06f2"`)
        await db.query(`DROP INDEX "public"."IDX_b316087ca3b544e1cca89d60c9"`)
        await db.query(`DROP INDEX "public"."IDX_4a1de51a90e2fef44b0cfbe3f7"`)
        await db.query(`ALTER TABLE "domain" DROP CONSTRAINT "FK_4e21006496ef49995f4cf5ff8c4"`)
    }
}
