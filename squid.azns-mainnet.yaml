manifestVersion: subsquid.io/v0.1
name: azns-mainnet
version: 7
description: 'AZERO.ID Indexer (Aleph Zero Mainnet)'

build:

deploy:
  addons:
    postgres:
    rpc:
      - aleph-zero:http
  processor:
    cmd: ['node', 'lib/processor']
    env:
      CHAIN: alephzero
      CHAIN_PREFIX: 42
      RPC: wss://ws.azero.dev/
      ARCHIVE: aleph-zero
  api:
    cmd:
      [
        'npx',
        'squid-graphql-server',
        '--dumb-cache',
        'in-memory',
        '--dumb-cache-ttl',
        '1000',
        '--dumb-cache-size',
        '100',
        '--dumb-cache-max-age',
        '1000',
      ]

scale:
  dedicated: true
  processor:
    profile: small
  addons:
    postgres:
      storage: 5G
      profile: small
    rpc:
      max-rate: 100rps
  api:
    profile: small
    replicas: 2
